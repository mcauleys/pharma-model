---
title: "R Notebook"
output: html_notebook
---



```{r}
rev.forcast <- function(now, years, assump.fixed, rates, market){
  
  total.patients = ceiling(market$incidence*(1+market$growth)^(0:years))
  treat.price = assump.fixed$revenue.per.patient*(1+assump.fixed$price.inflation)^(0:years)
  market.share = seq(from = market$share.init, by = market$share.escalation, length.out = (years+1))
  treated.patients = total.patients*market.share
  sales = treat.price*treated.patients
  
  
  rev <- data.frame(year = seq(now, (now+years)),
                    total.patients = total.patients,
                    market.share = market.share,
                    treated.patients = treated.patients,
                    treat.price = treat.price,
                    sales = sales
                    )
  
  return(rev)
  
}


forecast <- rev.forcast(2019, 10, assump.fixed, rates, market)

ggplot(forecast) +
  geom_line(aes(x = year, y = total.patients))


```

